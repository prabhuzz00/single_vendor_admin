import{r as T,S as B,h as _,j as e,f as t}from"./index-BRBX7hDb.js";import{u as V,x as H}from"./Layout-KhibMNC7.js";import{e as N}from"./exportFromJSON-fDIoOtpr.js";import{a as J}from"./toast-BmuvtaoB.js";import{u as U}from"./useAsync-BesWtCte.js";import{u as $}from"./useFilter-CmFPAZ1j.js";import{O}from"./OrderServices-D62-uqXJ.js";import{N as q}from"./NotFound-D4QUBmsM.js";import{P as z}from"./PageTitle-C0I8t3w2.js";import{O as G}from"./OrderTable-uIDeaMle.js";import{T as K}from"./TableLoading-ItMVDN_h.js";import{s as Q}from"./spinner-CkndCogW.js";import{A as W}from"./AnimatedContent-BDApi7bC.js";import"./iconBase-MO_yqM0e.js";import"./logo-color-D4dEd9DP.js";import"./browser-CmZe1AEk.js";import"./index-CBBKfmC5.js";import"./useDisableForDemo-8L6F_Yoc.js";import"./ProductServices-B8dTtDEx.js";import"./CouponServices-j8c0PyJg.js";import"./CurrencyServices-DdWWi0T6.js";import"./Status-EIEgTYEq.js";import"./Tooltip-Be4V-BoV.js";import"./index-B9F0o262.js";import"./SelectStatus-BSrxEl_8.js";const we=()=>{const{time:c,setTime:h,status:m,endDate:x,setStatus:u,setEndDate:g,startDate:p,currentPage:D,searchText:j,searchRef:b,method:v,setMethod:f,setStartDate:y,setSearchText:S,handleChangePage:P,handleSubmitForAll:A,resultsPerPage:w}=T.useContext(B),{t:s}=_(),[n,o]=T.useState(!1),{data:l,loading:F,error:C}=U(()=>O.getAllOrders({day:c,method:v,status:m,page:D,endDate:x,startDate:p,limit:w,customerName:j})),{currency:k,getNumber:E,getNumberTwo:i}=V(),{dataTable:L,serviceData:I}=$(l?.orders),M=async()=>{try{o(!0);const d=(await O.getAllOrders({page:1,day:c,method:v,status:m,endDate:x,download:!0,startDate:p,limit:l?.totalDoc,customerName:j}))?.orders?.map(a=>({_id:a._id,invoice:a.invoice,subTotal:i(a.subTotal),shippingCost:i(a.shippingCost),discount:i(a?.discount),total:i(a.total),paymentMethod:a.paymentMethod,status:a.status,user_info:a?.user_info?.name,createdAt:a.createdAt,updatedAt:a.updatedAt}));N({data:d,fileName:"orders",exportType:N.types.csv}),o(!1)}catch(r){o(!1),J(r?.response?.data?.message||r?.message)}},R=()=>{h(""),f(""),u(""),g(""),y(""),S(""),b.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsx(z,{children:s("Orders")}),e.jsx(W,{children:e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(t.CardBody,{children:e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"grid gap-4 lg:gap-4 xl:gap-6 md:gap-2 md:grid-cols-5 py-2",children:[e.jsx("div",{children:e.jsx(t.Input,{ref:b,type:"search",name:"search",placeholder:"Search by Customer Name"})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:r=>u(r.target.value),children:[e.jsx("option",{value:"Status",defaultValue:!0,hidden:!0,children:s("Status")}),e.jsx("option",{value:"Delivered",children:s("PageOrderDelivered")}),e.jsx("option",{value:"Pending",children:s("PageOrderPending")}),e.jsx("option",{value:"Processing",children:s("PageOrderProcessing")}),e.jsx("option",{value:"Cancel",children:s("OrderCancel")})]})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:r=>h(r.target.value),children:[e.jsx("option",{value:"Order limits",defaultValue:!0,hidden:!0,children:s("Orderlimits")}),e.jsx("option",{value:"5",children:s("DaysOrders5")}),e.jsx("option",{value:"7",children:s("DaysOrders7")}),e.jsx("option",{value:"15",children:s("DaysOrders15")}),e.jsx("option",{value:"30",children:s("DaysOrders30")})]})}),e.jsx("div",{children:e.jsxs(t.Select,{onChange:r=>f(r.target.value),children:[e.jsx("option",{value:"Method",defaultValue:!0,hidden:!0,children:s("Method")}),e.jsx("option",{value:"Cash",children:s("Cash")}),e.jsx("option",{value:"Card",children:s("Card")}),e.jsx("option",{value:"Credit",children:s("Credit")})]})}),e.jsx("div",{children:n?e.jsxs(t.Button,{disabled:!0,type:"button",className:"h-12 w-full",children:[e.jsx("img",{src:Q,alt:"Loading",width:20,height:10})," ",e.jsx("span",{className:"font-serif ml-2 font-light",children:"Processing"})]}):e.jsxs("button",{onClick:M,disabled:l?.orders?.length<=0||n,type:"button",className:`${(l?.orders?.length<=0||n)&&"opacity-50 cursor-not-allowed bg-brown-600"} flex items-center justify-center text-sm leading-5 h-12 w-full text-center transition-colors duration-150 font-medium px-6 py-2 rounded-lg text-white bg-brown-600 border border-transparent active:bg-brown-700 hover:bg-brown-700 shadow-sm hover:shadow-md `,children:["Download All Orders",e.jsx("span",{className:"ml-2 text-base",children:e.jsx(H,{})})]})})]}),e.jsxs("div",{className:"grid gap-4 lg:gap-6 xl:gap-6 lg:grid-cols-3 xl:grid-cols-3 md:grid-cols-3 sm:grid-cols-1 py-2",children:[e.jsxs("div",{children:[e.jsx(t.Label,{children:"Start Date"}),e.jsx(t.Input,{type:"date",name:"startDate",onChange:r=>y(r.target.value)})]}),e.jsxs("div",{children:[e.jsx(t.Label,{children:"End Date"}),e.jsx(t.Input,{type:"date",name:"startDate",onChange:r=>g(r.target.value)})]}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsxs("div",{className:"w-full mx-1",children:[e.jsx(t.Label,{style:{visibility:"hidden"},children:"Filter"}),e.jsx(t.Button,{type:"submit",className:"h-12 w-full bg-brown-600 hover:bg-brown-700 rounded-lg shadow-sm hover:shadow-md",children:"Filter"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx(t.Label,{style:{visibility:"hidden"},children:"Reset"}),e.jsx(t.Button,{layout:"outline",onClick:R,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})]})]})]})]})})})}),l?.methodTotals?.length>0&&e.jsx(t.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 rounded-t-lg rounded-0 mb-4",children:e.jsx(t.CardBody,{children:e.jsx("div",{className:"flex gap-1",children:l?.methodTotals?.map((r,d)=>e.jsx("div",{className:"dark:text-gray-300",children:r?.method&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-medium",children:[" ",r.method]})," :"," ",e.jsxs("span",{className:"font-semibold mr-2",children:[k,E(r.total)]})]})},d+1))})})}),F?e.jsx(K,{row:12,col:7,width:160,height:20}):C?e.jsx("span",{className:"text-center mx-auto text-red-500",children:C}):I?.length!==0?e.jsxs(t.TableContainer,{className:"mb-8 dark:bg-gray-900",children:[e.jsxs(t.Table,{children:[e.jsx(t.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(t.TableCell,{children:s("InvoiceNo")}),e.jsx(t.TableCell,{children:s("TimeTbl")}),e.jsx(t.TableCell,{children:s("CustomerName")}),e.jsx(t.TableCell,{children:s("MethodTbl")}),e.jsx(t.TableCell,{children:s("AmountTbl")}),e.jsx(t.TableCell,{children:s("OderStatusTbl")}),e.jsx(t.TableCell,{children:s("ActionTbl")}),e.jsx(t.TableCell,{className:"text-right",children:s("InvoiceTbl")})]})}),e.jsx(G,{orders:L})]}),e.jsx(t.TableFooter,{children:e.jsx(t.Pagination,{totalResults:l?.totalDoc,resultsPerPage:w,onChange:P,label:"Table navigation"})})]}):e.jsx(q,{title:"Sorry, There are no orders right now."})]})};export{we as default};
