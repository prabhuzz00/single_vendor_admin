import{r as a,S as D,j as e}from"./index-BRBX7hDb.js";import{e as N,c as S,b as T}from"./Layout-KhibMNC7.js";import{A as l}from"./AdminServices-DS-LzysT.js";import{P as I}from"./PageTitle-C0I8t3w2.js";import{a as n,n as o}from"./toast-BmuvtaoB.js";import"./iconBase-MO_yqM0e.js";import"./logo-color-D4dEd9DP.js";const K=()=>{a.useContext(D);const[L,v]=a.useState(null),[C,b]=a.useState(!0),[u,y]=a.useState(!1),[f,x]=a.useState([]),[w,g]=a.useState([]),[k,p]=a.useState(null),[j,d]=a.useState(null),[m,h]=a.useState(""),[r,c]=a.useState({label:"",dimensions:"",basePrice:""});a.useEffect(()=>{E()},[]);const E=async()=>{try{const s=await l.getCustomProductSettings();v(s),y(s.featureEnabled),x(s.shapes||[]),g(s.sizeRanges||[]),b(!1)}catch{n("Error loading settings"),b(!1)}},P=async()=>{try{await l.updateCustomProductSettings({featureEnabled:!u,shapes:f,sizeRanges:w}),y(!u),o(`Custom sticker feature ${u?"disabled":"enabled"}`)}catch{n("Error updating feature status")}},R=async()=>{if(!m.trim()){n("Please enter a shape name");return}try{const s=await l.addShape({name:m});x(s.settings.shapes),h(""),o("Shape added successfully")}catch{n("Error adding shape")}},_=async(s,t)=>{try{const i=await l.updateShape(s,t);x(i.settings.shapes),p(null),o("Shape updated successfully")}catch{n("Error updating shape")}},F=async s=>{if(confirm("Are you sure you want to delete this shape?"))try{const t=await l.deleteShape(s);x(t.settings.shapes),o("Shape deleted successfully")}catch{n("Error deleting shape")}},A=async()=>{if(!r.label.trim()||!r.dimensions.trim()||!r.basePrice){n("Please fill all fields");return}try{const s=await l.addSizeRange({label:r.label,dimensions:r.dimensions,basePrice:parseFloat(r.basePrice)});g(s.settings.sizeRanges),c({label:"",dimensions:"",basePrice:""}),o("Size range added successfully")}catch{n("Error adding size range")}},z=async(s,t)=>{try{const i=await l.updateSizeRange(s,{...t,basePrice:parseFloat(t.basePrice)});g(i.settings.sizeRanges),d(null),o("Size range updated successfully")}catch{n("Error updating size range")}},$=async s=>{if(confirm("Are you sure you want to delete this size range?"))try{const t=await l.deleteSizeRange(s);g(t.settings.sizeRanges),o("Size range deleted successfully")}catch{n("Error deleting size range")}};return C?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-yellow-500 border-t-transparent"})}):e.jsxs(e.Fragment,{children:[e.jsx(I,{children:"Custom Products"}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Enable Custom Sticker Feature on Client Site"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Toggle to enable or disable the custom sticker creation feature"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u,onChange:P,className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-yellow-500"})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Manage Sticker Shapes"}),e.jsxs("button",{onClick:()=>p("new"),className:"flex items-center space-x-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Add New Shape"})]})]}),k==="new"&&e.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border-2 border-yellow-400",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:m,onChange:s=>h(s.target.value),placeholder:"Enter shape name (e.g., Circle, Square)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),e.jsx("button",{onClick:R,className:"px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors",children:"Add"}),e.jsx("button",{onClick:()=>{p(null),h("")},className:"px-6 py-2 bg-gray-400 hover:bg-gray-500 text-white rounded-lg transition-colors",children:"Cancel"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map(s=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-yellow-400 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.enabled,onChange:t=>_(s._id,{enabled:t.target.checked}),className:"w-4 h-4 text-yellow-500 border-gray-300 rounded focus:ring-yellow-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Enabled"})]}),e.jsx("button",{onClick:()=>F(s._id),className:"text-red-500 hover:text-red-700 transition-colors",children:e.jsx(S,{className:"w-4 h-4"})})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.name})]},s._id))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Manage Size & Price Ranges"}),e.jsxs("button",{onClick:()=>d("new"),className:"flex items-center space-x-2 px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Add New Size Range"})]})]}),j==="new"&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg border-2 border-yellow-400",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-3",children:[e.jsx("input",{type:"text",value:r.label,onChange:s=>c({...r,label:s.target.value}),placeholder:"Label (e.g., Small (2x2))",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),e.jsx("input",{type:"text",value:r.dimensions,onChange:s=>c({...r,dimensions:s.target.value}),placeholder:"Dimensions (e.g., 2x2)",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),e.jsx("input",{type:"number",value:r.basePrice,onChange:s=>c({...r,basePrice:s.target.value}),placeholder:"Base Price (₹)",step:"0.01",className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:A,className:"px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg transition-colors",children:"Add"}),e.jsx("button",{onClick:()=>{d(null),c({label:"",dimensions:"",basePrice:""})},className:"px-6 py-2 bg-gray-400 hover:bg-gray-500 text-white rounded-lg transition-colors",children:"Cancel"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Size Label"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Dimensions (e.g., 2x2)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Base Price (₹)"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(s=>e.jsx("tr",{className:"hover:bg-gray-50",children:j===s._id?e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"text",defaultValue:s.label,id:`label-${s._id}`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"text",defaultValue:s.dimensions,id:`dimensions-${s._id}`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"number",defaultValue:s.basePrice,id:`price-${s._id}`,step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})}),e.jsxs("td",{className:"px-6 py-4 text-right",children:[e.jsx("button",{onClick:()=>{const t=document.getElementById(`label-${s._id}`).value,i=document.getElementById(`dimensions-${s._id}`).value,B=document.getElementById(`price-${s._id}`).value;z(s._id,{label:t,dimensions:i,basePrice:B})},className:"text-yellow-600 hover:text-yellow-800 mr-3",children:"Save"}),e.jsx("button",{onClick:()=>d(null),className:"text-gray-600 hover:text-gray-800",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.label}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.dimensions}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₹",s.basePrice.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>d(s._id),className:"text-yellow-600 hover:text-yellow-800 mr-3",children:e.jsx(T,{className:"w-4 h-4 inline"})}),e.jsx("button",{onClick:()=>$(s._id),className:"text-red-600 hover:text-red-800",children:e.jsx(S,{className:"w-4 h-4 inline"})})]})]})},s._id))})]})})]})]})};export{K as default};
