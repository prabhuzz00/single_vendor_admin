import{u as Q,r as u,S as J,j as e,L as Z,f as k}from"./index-BRBX7hDb.js";import{a as oe}from"./index.prod-DzGpE9S3.js";import{C as ee,P as se,A as H}from"./ProductServices-B8dTtDEx.js";import{C as G}from"./CouponServices-j8c0PyJg.js";import{C as W}from"./CurrencyServices-DdWWi0T6.js";import{n as p,a as O}from"./toast-BmuvtaoB.js";import{P as ne,M as ie,R as ce,T as X}from"./ParentCategory-b8eB83_s.js";import{a as de,T as pe}from"./DrawerButton-BjwC-AQC.js";import{u as ge,r as me,l as ue}from"./Layout-KhibMNC7.js";import{u as he,E as D}from"./index.esm-DIUuZJ-3.js";import{L as n}from"./LabelArea-B1eROtO8.js";import{S as P}from"./SwitchToggle-CNRwyEeq.js";import{u as xe}from"./useDisableForDemo-8L6F_Yoc.js";const Ee=({id:h,status:i,category:N,currencyStatusName:y})=>{const c=Q(),{setIsUpdate:d}=u.useContext(J),S=async a=>{try{let l;if(i==="show"?l="hide":l="show",c.pathname==="/categories"||N){const t=await ee.updateStatus(a,{status:l});d(!0),p(t.message)}if(c.pathname==="/products"){const t=await se.updateStatus(a,{status:l});d(!0),p(t.message)}if(c.pathname==="/languages"){const t=await Z.updateStatus(a,{status:l});d(!0),p(t.message)}if(c.pathname==="/currencies")if(y==="status"){const t=await W.updateEnabledStatus(a,{status:l});d(!0),p(t.message)}else{const t=await W.updateLiveExchangeRateStatus(a,{live_exchange_rates:l});d(!0),p(t.message)}if(c.pathname==="/attributes"){const t=await H.updateStatus(a,{status:l});d(!0),p(t.message)}if(c.pathname===`/attributes/${c.pathname.split("/")[2]}`){const t=await H.updateChildStatus(a,{status:l});d(!0),p(t.message)}if(c.pathname==="/coupons"){const t=await G.updateStatus(a,{status:l});d(!0),p(t.message)}if(c.pathname==="/our-staff"){const t=await G.updateStaffStatus(a,{status:l});d(!0),p(t.message)}}catch(l){O(l?l?.response?.data?.message:l?.message)}};return e.jsx(oe,{onChange:()=>S(h),checked:i==="show",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})},Y=({register:h,name:i,label:N,placeholder:y,required:c,type:d,value:S})=>e.jsx(e.Fragment,{children:e.jsx(k.Textarea,{className:"border text-sm border-gray-200 focus:border-gray-300 block w-full bg-gray-100",...h(`${i}`,{required:c?`${N} is required!`:!1}),type:d,placeholder:y,name:i,value:S,rows:"4",spellCheck:"false"})}),je=(h,i="en",N)=>{const[y,c]=u.useState(""),[d,S]=u.useState([]),a=Q(),[l,t]=u.useState(""),[x,$]=u.useState(!0),[L,v]=u.useState(!0),[b,B]=u.useState([]),[f,F]=u.useState([]),[R,U]=u.useState(!1),[M,w]=u.useState(""),{isBulkDrawerOpen:_,closeBulkDrawer:C,setIsUpdate:T}=u.useContext(J),{handleDisableForDemo:V}=xe(),{register:A,handleSubmit:K,watch:E,setValue:o,clearErrors:r,formState:{errors:q}}=he(),z=async s=>{if(!V())try{const m={ids:h,categories:b?.map(g=>g._id),category:f[0]?._id,productType:[R?"food":"others"],show:s.show,status:x?"show":"hide",tag:JSON.stringify(d)},j={ids:h,status:x?"show":"hide"},I={ids:h,enabled:x?"show":"hide",live_exchange_rates:L?"show":"hide"},ae={ids:h,parentId:l,description:s.description,parentName:M,status:x?"show":"hide"},te={ids:h,option:s.option,status:x?"show":"hide"},re={ids:h,currentId:N,changeId:s.groupName,status:x?"show":"hide"},le={ids:h,startTime:s.startTime,endTime:s.endTime,status:x?"show":"hide"};if(a.pathname==="/products"){const g=await se.updateManyProducts(m);T(!0),p(g.message),C()}if(a.pathname==="/coupons"){const g=await G.updateManyCoupons(le);T(!0),p(g.message),C()}if(a.pathname==="/languages"){const g=await Z.updateManyLanguage(j);T(!0),p(g.message),C()}if(a.pathname==="/currencies"){const g=await W.updateManyCurrencies(I);T(!0),p(g.message),C()}if(a.pathname==="/categories"||a.pathname===`/categories/${N}`){const g=await ee.updateManyCategory(ae);T(!0),p(g.message),C()}if(a.pathname==="/attributes"){const g=await H.updateManyAttribute(te);T(!0),p(g.message),C()}if(a.pathname===`/attributes/${a.pathname.split("/")[2]}`){const g=await H.updateManyChildAttribute(re);T(!0),p(g.message),C()}}catch(m){O(m?.response?.data?.message||m?.message)}};return u.useEffect(()=>{if(!_){o("parent"),o("children"),o("type"),o("show"),o("name"),c(""),S([]),r("parent"),r("children"),r("type"),r("name"),o("name"),o("iso_code"),o("call_prefix"),o("currency"),o("zone"),r("name"),r("iso_code"),r("call_prefix"),r("currency"),r("zone"),r("status"),o("name"),o("iso_code"),o("country"),o("zone"),o("description"),r("name"),r("iso_code"),r("country"),r("zone"),r("status"),r("show"),r("description"),F([]),B([]);return}},[o,_,r]),u.useEffect(()=>{c(E("children"))},[E,y]),{register:A,watch:E,handleSubmit:K,onSubmit:z,errors:q,tag:d,setTag:S,published:x,setPublished:$,published2:L,setPublished2:v,checked:l,setChecked:t,selectedCategory:b,setSelectedCategory:B,defaultCategory:f,setDefaultCategory:F,selectCategoryName:M,setSelectCategoryName:w,isFoodItem:R,setIsFoodItem:U}},Fe=({ids:h,title:i,lang:N,data:y,childId:c,attributes:d,isCheck:S})=>{const{toggleBulkDrawer:a,isBulkDrawerOpen:l,closeBulkDrawer:t}=u.useContext(J),{showingTranslateValue:x}=ge(),{tag:$,setTag:L,published:v,register:b,onSubmit:B,errors:f,checked:F,setChecked:R,resetRefTwo:U,handleSubmit:M,setPublished:w,selectedCategory:_,setSelectedCategory:C,defaultCategory:T,setDefaultCategory:V,selectCategoryName:A,setSelectCategoryName:K}=je(h,N,c),E={motionName:"node-motion",motionAppear:!1,onAppearStart:s=>({height:0}),onAppearActive:s=>({height:s.scrollHeight}),onLeaveStart:s=>({height:s.offsetHeight}),onLeaveActive:()=>({height:0})},o=s=>{let m=[];for(let j of s)m.push({title:x(j?.name),key:j._id,children:j.children.length>0&&o(j.children)});return m},r=(s,m)=>s._id===m?s:s?.children?.reduce((j,I)=>j??r(I,m),void 0),q=s=>{const m=S?.find(j=>j===s);if(S?.length===y[0]?.children?.length)return O("This can't be select as a parent category!");if(m!==void 0)return O("This can't be select as a parent category!");if(s===c)return O("This can't be select as a parent category!");{if(s===void 0)return;R(s);const j=y[0],I=r(j,s);K(x(I?.name))}},z=`
  .rc-tree-child-tree {
    display: hidden;
  }
  .node-motion {
    transition: all .3s;
    overflow-y: hidden;
  }
`;return e.jsx(e.Fragment,{children:e.jsxs(de,{open:l,onClose:t,parent:null,level:null,placement:"right",children:[e.jsx("button",{onClick:a,className:"absolute z-50 text-red-500 hover:bg-red-100 hover:text-gray-700 transition-colors duration-150 bg-white shadow-md mr-6 mt-6 right-0 left-auto w-10 h-10 rounded-full block text-center",children:e.jsx(me,{className:"mx-auto"})}),e.jsxs("div",{className:"flex flex-col w-full h-full justify-between",children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:e.jsx(pe,{title:`Update Selected ${i}`,description:`Apply changes to the selected ${i} from the list`})}),e.jsx(ue.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsxs("form",{onSubmit:M(B),className:"block",children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow w-full h-full max-h-full pb-40 md:pb-32 lg:pb-32 xl:pb-32",children:[i==="Products"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Categorys"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ne,{lang:N,selectedCategory:_,setSelectedCategory:C,setDefaultCategory:V})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Default Category"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ie,{displayValue:"name",isObject:!0,singleSelect:!0,ref:U,hidePlaceholder:!0,onKeyPressFn:function(){},onRemove:function(){},onSearch:function(){},onSelect:s=>V(s),selectedValues:T,options:_,placeholder:"Default Category"})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P,{handleProcess:w,processOption:v}),e.jsx(D,{errorName:f.status})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Product Tags"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(ce,{placeholder:"Product Tag (Write then press enter to add new tag )",tags:$,onChange:s=>L(s)})})]})]}),i==="Coupons"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Start Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{...b("startTime",{required:"Coupon Validation Start Time"}),label:"Coupon Validation Start Time",name:"startTime",type:"datetime-local",placeholder:"Start Time"}),e.jsx(D,{errorName:f.startTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"End Time"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{...b("endTime",{required:"Coupon Validation End Time"}),label:"Coupon Validation End Time",name:"endTime",type:"datetime-local",placeholder:"End Time"}),e.jsx(D,{errorName:f.endTime})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Published"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(P,{handleProcess:w,processOption:v}),e.jsx(D,{errorName:f.published})]})]})]}),i==="Languages"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:v,handleProcess:w})})]})}),i==="Currencies"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Enabled"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:v,handleProcess:w})})]})}),i==="Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Y,{register:b,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(D,{errorName:f.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{readOnly:!0,...b("parent",{required:!1}),name:"parent",value:A||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:z}}),e.jsx(X,{treeData:o(y),selectedKeys:[F],onSelect:s=>q(s[0]),motion:E,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:v,handleProcess:w})})]})]}),i==="Child Categories"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Description"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(Y,{register:b,label:"Description",name:"description",type:"text",placeholder:"Category Description"}),e.jsx(D,{errorName:f.description})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Parent Category"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(k.Input,{readOnly:!0,...b("parent",{required:!1}),name:"parent",value:A||"Home",placeholder:"parent category",type:"text"}),e.jsxs("div",{className:"draggable-demo capitalize",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:z}}),e.jsx(X,{treeData:o(y),selectedKeys:[F],onSelect:s=>q(s[0]),motion:E,animation:"slide-up"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:v,handleProcess:w})})]})]}),i==="Attributes"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Options"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(k.Select,{name:"option",...b("option",{required:"Option is required!"}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select type"}),e.jsx("option",{value:"Dropdown",children:"Dropdown"}),e.jsx("option",{value:"Radio",children:"Radio"})]}),e.jsx(D,{errorName:f.option})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:v,handleProcess:w})})]})]}),i==="Attribute Value(s)"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Change Attribute Group"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsxs(k.Select,{name:"groupName",...b("groupName",{required:!1}),children:[e.jsx("option",{value:"",defaultValue:!0,hidden:!0,children:"Select Attribute Group"}),d?.map((s,m)=>e.jsx("option",{value:s._id,children:x(s?.name)},m+1))]}),e.jsx(D,{errorName:f.groupName})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(n,{label:"Published"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(P,{title:"",processOption:v,handleProcess:w})})]})]})]}),e.jsxs("div",{className:"fixed bottom-0 w-full right-0 py-4 lg:py-8 px-6 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex bg-gray-50 border-t border-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:[e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsx(k.Button,{onClick:a,className:" text-red-500 hover:bg-red-50 hover:border-red-100 hover:text-red-600 dark:bg-gray-700 dark:border-gray-700 dark:text-gray-500 dark:hover:bg-gray-800 dark:hover:text-red-700",layout:"outline",children:"Cancel"})}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(k.Button,{type:"submit",className:"h-12 w-full",children:[" ","Bulk Update ",i]})})]})]})})]})]})})};export{Fe as B,Ee as S,Y as T};
