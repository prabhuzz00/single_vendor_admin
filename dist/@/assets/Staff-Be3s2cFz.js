import{r as w,f as s,h as T,j as e,S as A,A as P}from"./index-BRBX7hDb.js";import{t as D,l as E,v as F,u as B,g as z,e as M}from"./Layout-KhibMNC7.js";import{u as L}from"./useAsync-BesWtCte.js";import{u as U}from"./useFilter-CmFPAZ1j.js";import{T as C,D as Z,u as O,M as I}from"./DrawerButton-BjwC-AQC.js";import{j as _}from"./index-D6WZe_ds.js";import{E as b}from"./index.esm-DIUuZJ-3.js";import{I as v}from"./InputArea-D5SbBmG7.js";import{u as q}from"./useStaffSubmit-C5SxCHZh.js";import{S as J}from"./SelectRole-DJY4sn7q.js";import{L as x}from"./LabelArea-B1eROtO8.js";import{U as V}from"./Uploader-DqKrMY9q.js";import{T as $}from"./TableLoading-ItMVDN_h.js";import{S as H}from"./Status-EIEgTYEq.js";import{T as W}from"./Tooltip-Be4V-BoV.js";import{D as G}from"./DeleteModal-CqhPW0Ap.js";import{E as K}from"./EditDeleteButton-BLUUhkxP.js";import{a as Q}from"./index.prod-DzGpE9S3.js";import{A as k}from"./AdminServices-DS-LzysT.js";import{a as y,n as X}from"./toast-BmuvtaoB.js";import{N as Y}from"./NotFound-D4QUBmsM.js";import{P as ee}from"./PageTitle-C0I8t3w2.js";import{A as se}from"./AnimatedContent-BDApi7bC.js";import"./iconBase-MO_yqM0e.js";import"./logo-color-D4dEd9DP.js";import"./browser-CmZe1AEk.js";import"./index-CBBKfmC5.js";import"./useDisableForDemo-8L6F_Yoc.js";import"./ProductServices-B8dTtDEx.js";import"./CouponServices-j8c0PyJg.js";import"./CurrencyServices-DdWWi0T6.js";import"./spinner-CkndCogW.js";import"./useTranslationValue-BkQTMktR.js";import"./tslib.es6-BfZZHrVl.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";const R=({id:i})=>{const{role:o}=D(),{mode:d}=w.useContext(s.WindmillContext),{register:t,handleSubmit:m,onSubmit:c,errors:n,adminInfo:p,imageUrl:g,setImageUrl:r,isSubmitting:h,selectedDate:u,setSelectedDate:j,accessedRoutes:f,setAccessedRoutes:N,handleSelectLanguage:l}=q(i),{t:a}=T();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full relative p-6 border-b border-gray-100 bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",children:i?e.jsx(C,{register:t,handleSelectLanguage:l,title:a("UpdateStaff"),description:a("UpdateStaffdescription")}):e.jsx(C,{register:t,handleSelectLanguage:l,title:a("AddStaffTitle"),description:a("AddStaffdescription")})}),e.jsx(E.Scrollbars,{className:"w-full md:w-7/12 lg:w-8/12 xl:w-8/12 relative dark:bg-gray-700 dark:text-gray-200",children:e.jsx(s.Card,{className:"overflow-y-scroll flex-grow scrollbar-hide w-full max-h-full",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:m(c),children:[e.jsxs("div",{className:"px-6 pt-8 flex-grow scrollbar-hide w-full max-h-full pb-40",children:[e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Staff Image"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(V,{imageUrl:g,setImageUrl:r,folder:"admin",targetWidth:238,targetHeight:238})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Name"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(v,{required:!0,register:t,label:"Name",name:"name",type:"text",autoComplete:"username",placeholder:"Staff name"}),e.jsx(b,{errorName:n.name})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Email"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(v,{required:!0,register:t,label:"Email",name:"email",type:"text",autoComplete:"username",pattern:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,placeholder:"Email"}),e.jsx(b,{errorName:n.email})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Password"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[i?e.jsx(v,{register:t,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}):e.jsx(v,{required:!0,register:t,label:"Password",name:"password",type:"password",autoComplete:"current-password",placeholder:"Password"}),e.jsx(b,{errorName:n.password})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Contact Number"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(v,{required:!0,register:t,label:"Contact Number",name:"phone",pattern:/^[+]?\d*$/,minLength:6,maxLength:15,type:"text",placeholder:"Phone number"}),e.jsx(b,{errorName:n.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Joining Date"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(s.Input,{onChange:S=>j(S.target.value),label:"Joining Date",name:"joiningDate",value:u,type:"date",placeholder:a("StaffJoiningDate")}),e.jsx(b,{errorName:n.joiningDate})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Staff Role"}),e.jsxs("div",{className:"col-span-8 sm:col-span-4",children:[e.jsx(J,{register:t,label:"Role",name:"role"}),e.jsx(b,{errorName:n.role})]})]}),(o==="Admin"||o==="Super Admin")&&e.jsxs("div",{className:"grid grid-cols-6 gap-3 md:gap-5 xl:gap-6 lg:gap-6 mb-6",children:[e.jsx(x,{label:"Select Routes to given Access"}),e.jsx("div",{className:"col-span-8 sm:col-span-4",children:e.jsx(_,{options:F,value:f,className:d,onChange:S=>N(S),labelledBy:"Select Coupon"})})]})]}),e.jsx(Z,{id:i,title:"Staff",zIndex:"z-5",isSubmitting:h})]})})})})]})},ae=({id:i,status:o,option:d,staff:t})=>{const{setIsUpdate:m}=w.useContext(A),{role:c}=D(),n=async(p,g)=>{if(!(c==="Super Admin"||c==="Admin"))return y("Only Super Admin and Admin can enable/disable any staff!");try{let r;o==="Active"?r="Inactive":r="Active";const h=await k.updateStaffStatus(p,{status:r});m(!0),X(h.message);return}catch(r){y(r?r?.response?.data?.message:r?.message)}};return e.jsx(e.Fragment,{children:e.jsx(Q,{onChange:()=>n(i),checked:o==="Active",className:"react-switch md:ml-0",uncheckedIcon:e.jsx("div",{style:{display:"flex",alignItems:"center",height:"100%",width:120,fontSize:14,color:"white",paddingRight:22,paddingTop:1}}),width:30,height:15,handleDiameter:13,offColor:"#E53E3E",onColor:"#2F855A",checkedIcon:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",width:73,height:"100%",fontSize:14,color:"white",paddingLeft:20,paddingTop:1}})})})},le=({isOpen:i,onClose:o,staff:d,showingTranslateValue:t})=>e.jsxs(s.Modal,{isOpen:i,onClose:o,children:[e.jsxs("h1",{className:"text-xl font-medium text-center pb-6 dark:text-gray-300",children:["List of route access for"," ",e.jsx("span",{className:"text-emerald-600",children:t(d?.name)})]}),e.jsx(s.ModalBody,{children:d?.access_list?.length>0?e.jsx("ol",{className:"list-disc pl-5",children:d?.access_list?.map((m,c)=>e.jsx("li",{className:"text-sm text-gray-700 dark:text-gray-300 capitalize",children:m},c))}):e.jsx("p",{className:"text-orange-500 py-10 text-lg text-center",children:"This staff not have any route access!"})}),e.jsx(s.ModalFooter,{className:"justify-end",children:e.jsx(s.Button,{className:"w-full sm:w-auto bg-red-400 text-white hover:bg-red-500",layout:"delete",onClick:o,children:"Close"})})]}),te=({staffs:i,lang:o})=>{const{title:d,serviceId:t,handleModalOpen:m,handleUpdate:c,isSubmitting:n,handleResetPassword:p}=O(),{showDateFormat:g,showingTranslateValue:r}=B(),[h,u]=w.useState(null),[j,f]=w.useState(!1),N=a=>{u(a),f(!0)},l=()=>{u(null),f(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(G,{id:t,title:d}),j&&e.jsx(le,{staff:h,isOpen:j,onClose:l,showingTranslateValue:r}),e.jsx(I,{children:e.jsx(R,{id:t})}),e.jsx(s.TableBody,{children:i?.map(a=>e.jsxs(s.TableRow,{children:[e.jsx(s.TableCell,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(s.Avatar,{className:"hidden mr-3 md:block bg-gray-50",src:a.image,alt:"staff"}),e.jsx("div",{children:e.jsx("h2",{className:"text-sm font-medium",children:r(a?.name)})})]})}),e.jsxs(s.TableCell,{children:[e.jsx("span",{className:"text-sm",children:a.email})," "]}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm ",children:a.phone})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm",children:g(a.joiningData)})}),e.jsx(s.TableCell,{children:e.jsx("span",{className:"text-sm font-semibold",children:a?.role})}),e.jsx(s.TableCell,{className:"text-center text-xs",children:e.jsx(H,{status:a.status})}),e.jsx(s.TableCell,{className:"text-center",children:e.jsx(ae,{id:a?._id,staff:a,option:"staff",status:a.status})}),e.jsx(s.TableCell,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("button",{onClick:()=>N(a),className:"text-gray-400",children:e.jsx(W,{id:"view",Icon:z,title:"View Access Route",bgColor:"#059669"})}),e.jsx(K,{id:a._id,staff:a,isSubmitting:n,handleUpdate:c,handleModalOpen:m,handleResetPassword:p,title:r(a?.name)})]})})]},a._id))})]})},Ze=()=>{const{state:i}=w.useContext(P),{adminInfo:o}=i,{toggleDrawer:d,lang:t}=w.useContext(A),{data:m,loading:c,error:n}=L(()=>k.getAllStaff({email:o.email})),{userRef:p,setRole:g,totalResults:r,resultsPerPage:h,dataTable:u,serviceData:j,handleChangePage:f,handleSubmitUser:N}=U(m),{t:l}=T(),a=()=>{g(""),p.current.value=""};return e.jsxs(e.Fragment,{children:[e.jsxs(ee,{children:[l("StaffPageTitle")," "]}),e.jsx(I,{children:e.jsx(R,{})}),e.jsx(se,{children:e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("form",{onSubmit:N,className:"py-3 grid gap-4 lg:gap-6 xl:gap-6 md:flex xl:flex",children:[e.jsxs("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx(s.Input,{ref:p,type:"search",name:"search",placeholder:l("StaffSearchBy")}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-5 mr-1"})]}),e.jsx("div",{className:"flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:e.jsxs(s.Select,{onChange:S=>g(S.target.value),children:[e.jsx("option",{value:"All",defaultValue:!0,hidden:!0,children:l("StaffRole")}),e.jsx("option",{value:"Admin",children:l("StaffRoleAdmin")}),e.jsx("option",{value:"Cashier",children:l("SelectCashiers")}),e.jsx("option",{value:"Super Admin",children:l("SelectSuperAdmin")})]})}),e.jsx("div",{className:"w-full md:w-56 lg:w-56 xl:w-56",children:e.jsxs(s.Button,{onClick:d,className:"w-full rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(M,{})}),l("AddStaff")]})}),e.jsxs("div",{className:"mt-2 md:mt-0 flex items-center xl:gap-x-4 gap-x-1 flex-grow-0 md:flex-grow lg:flex-grow xl:flex-grow",children:[e.jsx("div",{className:"w-full mx-1",children:e.jsx(s.Button,{type:"submit",className:"h-12 w-full bg-brown-600 hover:bg-brown-700 rounded-lg shadow-sm hover:shadow-md",children:"Filter"})}),e.jsx("div",{className:"w-full",children:e.jsx(s.Button,{layout:"outline",onClick:a,type:"reset",className:"px-4 md:py-1 py-3 text-sm dark:bg-gray-700",children:e.jsx("span",{className:"text-black dark:text-gray-200",children:"Reset"})})})]})]})})})}),c?e.jsx($,{row:12,col:7,width:163,height:20}):n?e.jsx("span",{className:"text-center mx-auto text-red-500",children:n}):j?.length!==0?e.jsxs(s.TableContainer,{className:"mb-8 rounded-b-lg",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:l("StaffNameTbl")}),e.jsx(s.TableCell,{children:l("StaffEmailTbl")}),e.jsx(s.TableCell,{children:l("StaffContactTbl")}),e.jsx(s.TableCell,{children:l("StaffJoiningDateTbl")}),e.jsx(s.TableCell,{children:l("StaffRoleTbl")}),e.jsx(s.TableCell,{className:"text-center",children:l("OderStatusTbl")}),e.jsx(s.TableCell,{className:"text-center",children:l("PublishedTbl")}),e.jsx(s.TableCell,{className:"text-center",children:l("StaffActionsTbl")})]})}),e.jsx(te,{staffs:u,lang:t})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:r,resultsPerPage:h,onChange:f,label:"Table navigation"})})]}):e.jsx(Y,{title:"Sorry, There are no staff right now."})]})};export{Ze as default};
