import{c as te,g as re,r as g,h as D,j as e,f as l,S as ae}from"./index-BRBX7hDb.js";import{u as se,F as de,a as oe,d as j}from"./Layout-KhibMNC7.js";import{i as le,a as ne,u as ie}from"./useFilter-CmFPAZ1j.js";import{u as w}from"./useAsync-BesWtCte.js";import{C as ce,r as he,L as xe,D as ge}from"./index-BpRQKF8d.js";import{S as p,T as me}from"./TableLoading-ItMVDN_h.js";import{O as be}from"./OrderTable-uIDeaMle.js";import{N as ye}from"./NotFound-D4QUBmsM.js";import{P as F}from"./PageTitle-C0I8t3w2.js";import{O}from"./OrderServices-D62-uqXJ.js";import{A as ue}from"./AnimatedContent-BDApi7bC.js";import"./iconBase-MO_yqM0e.js";import"./logo-color-D4dEd9DP.js";import"./browser-CmZe1AEk.js";import"./index-CBBKfmC5.js";import"./useDisableForDemo-8L6F_Yoc.js";import"./toast-BmuvtaoB.js";import"./ProductServices-B8dTtDEx.js";import"./CouponServices-j8c0PyJg.js";import"./CurrencyServices-DdWWi0T6.js";import"./Status-EIEgTYEq.js";import"./Tooltip-Be4V-BoV.js";import"./index-B9F0o262.js";import"./SelectStatus-BSrxEl_8.js";var _={exports:{}};(function(r,n){(function(d,s){r.exports=s()})(te,function(){return function(d,s,m){s.prototype.isYesterday=function(){var i="YYYY-MM-DD",x=m().subtract(1,"day");return this.format(i)===x.format(i)}}})})(_);var je=_.exports;const fe=re(je);ce.register(...he);const pe=({salesReport:r})=>{const n=new Set,d=r?.filter(a=>{const c=!n.has(a.date);return n.add(a.date),c}),[s,m]=g.useState({title:"Sales",color:"emerald"}),i=({title:a,color:c})=>{m({title:a,color:c})},x={data:{labels:d?.sort((a,c)=>new Date(a.date)-new Date(c.date))?.map(a=>a.date),datasets:[s.title==="Sales"?{label:"Sales",data:d?.sort((a,c)=>new Date(a.date)-new Date(c.date))?.map(a=>a.total),borderColor:"#10B981",backgroundColor:"#10B981",borderWidth:3,yAxisID:"y"}:{label:"Order",data:d?.sort((a,c)=>new Date(a.date)-new Date(c.date))?.map(a=>a.order),borderColor:"#F97316",backgroundColor:"#F97316",borderWidth:3,yAxisID:"y"}]},options:{responsive:!0},legend:{display:!1}},{t:b}=D();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-medium text-center text-gray-500 border-b border-gray-200 dark:text-gray-400 dark:border-gray-700 mb-4",children:e.jsxs("ul",{className:"flex flex-wrap -mb-px",children:[e.jsx("li",{className:"mr-2",children:e.jsx("button",{onClick:()=>i({title:"Sales",color:"emerald"}),type:"button",className:`inline-block p-2 rounded-t-lg border-b-2 border-transparent ${s.title==="Sales"?"text-emerald-600 border-emerald-600 dark:text-emerald-500 dark:border-emerald-500":"hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"}  focus:outline-none`,children:b("Sales")})}),e.jsx("li",{className:"mr-2",children:e.jsx("button",{onClick:()=>i({title:"Orders",color:"red"}),type:"button",className:`inline-block p-2 rounded-t-lg border-b-2 border-transparent ${s.title==="Orders"?"text-orange-500 border-orange-500 dark:text-orange-500 dark:border-orange-500":"hover:text-gray-600 hover:border-gray-300 dark:hover:text-gray-300"}  focus:outline-none`,children:b("Orders")})})]})}),e.jsx(xe,{...x})]})},ve=({children:r,title:n,loading:d,mode:s})=>e.jsxs("div",{className:"min-w-0 p-4 bg-white rounded-lg shadow-xs dark:bg-gray-800",children:[e.jsx("p",{className:"mb-4 font-semibold text-gray-800 dark:text-gray-300",children:d?e.jsx(p,{count:1,height:20,className:"dark:bg-gray-800 bg-gray-200",baseColor:`${s==="dark"?"#010101":"#f9f9f9"}`,highlightColor:`${s==="dark"?"#1a1c23":"#f8f8f8"} `}):n}),n==="Best Selling Products"?e.jsx(e.Fragment,{children:d?e.jsx("div",{className:"flex justify-center",children:e.jsx(p,{className:"dark:bg-gray-800 bg-gray-200",baseColor:`${s==="dark"?"#010101":"#f9f9f9"}`,highlightColor:`${s==="dark"?"#1a1c23":"#f8f8f8"} `,count:1,width:250,height:250,circle:!0})}):r}):e.jsx(e.Fragment,{children:d?e.jsx(p,{className:"dark:bg-gray-800 bg-gray-200",baseColor:`${s==="dark"?"#010101":"#f9f9f9"}`,highlightColor:`${s==="dark"?"#1a1c23":"#f8f8f8"} `,count:13,height:20}):r})]}),Ce=({mode:r,loading:n,todayCash:d,todayCard:s,todayCredit:m,todayOnline:i,totalAmount:x,totalOrders:b})=>{D();const{currency:a,getNumberTwo:c}=se(),[v,T]=g.useState("Cash"),C=[{name:"Cash",value:d||0},{name:"Card",value:s||0},{name:"Credit",value:m||0},{name:"Online",value:i||0}];return e.jsx(e.Fragment,{children:n?e.jsx(p,{count:6,height:40,className:"dark:bg-gray-800 bg-gray-200",baseColor:`${r==="dark"?"#010101":"#f9f9f9"}`,highlightColor:`${r==="dark"?"#1a1c23":"#f8f8f8"}`}):e.jsx(l.Card,{className:"h-full",children:e.jsxs(l.CardBody,{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-700 dark:text-gray-200",children:"Total Sales Overview"}),e.jsxs("div",{className:"bg-gradient-to-br from-brown-400 to-brown-500 rounded-xl p-6 mb-4 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"text-white",children:[e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Orders"}),e.jsx("h2",{className:"text-3xl font-bold",children:"All-Time Sales"})]}),e.jsxs("div",{className:"text-white text-right",children:[e.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Orders"}),e.jsxs("h2",{className:"text-2xl font-bold",children:[a,c(x||0)]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:C.map(y=>e.jsx("button",{onClick:()=>T(y.name),className:`px-3 py-2 rounded-lg text-sm font-semibold transition-all duration-200 shadow-md ${v===y.name?"bg-white text-brown-700 shadow-lg scale-105":"bg-brown-700 text-white hover:bg-brown-800 hover:shadow-lg hover:scale-105"}`,children:y.name},y.name))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-brown-100 dark:bg-brown-900 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:e.jsx("svg",{className:"w-5 h-5 text-brown-700 dark:text-brown-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total_00"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:[a,c(C.find(y=>y.name===v)?.value||0)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Today Orders"})})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900 rounded-lg flex items-center justify-center mr-3",children:e.jsx("svg",{className:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total_00"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:[a,c(0)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This Month"})})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-brown-100 dark:bg-brown-900 rounded-xl flex items-center justify-center mr-3 shadow-sm",children:e.jsx("svg",{className:"w-5 h-5 text-brown-700 dark:text-brown-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total_00"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:[a,c(0)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This Month"})})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-100 dark:bg-cyan-900 rounded-lg flex items-center justify-center mr-3",children:e.jsx("svg",{className:"w-5 h-5 text-cyan-600 dark:text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total_00"}),e.jsxs("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200",children:[a,c(0)]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This Month"})})]})})]})]})})})},Ne=({mode:r,loading:n,ordersPending:d,totalOrders:s})=>{const m=({value:i,label:x,icon:b,gradient:a,iconBg:c})=>e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-shadow duration-300",children:[e.jsx("div",{className:`absolute -top-6 -right-6 w-24 h-24 ${a} opacity-10 rounded-full blur-2xl`}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-12 h-12 ${c} rounded-lg mb-4`,children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsx("div",{className:"mb-2",children:e.jsx("h2",{className:"text-4xl font-bold text-gray-800 dark:text-white",children:i})}),e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:x}),e.jsx("div",{className:"mt-4 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${a} transition-all duration-500`,style:{width:`${s>0?i/s*100:100}%`}})})]})]});return e.jsx(e.Fragment,{children:n?e.jsx(p,{count:4,height:60,className:"dark:bg-gray-800 bg-gray-200",baseColor:`${r==="dark"?"#010101":"#f9f9f9"}`,highlightColor:`${r==="dark"?"#1a1c23":"#f8f8f8"}`}):e.jsx(l.Card,{className:"h-full",children:e.jsxs(l.CardBody,{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-gray-700 dark:text-gray-200",children:"Key Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{value:d||0,label:"Orders Pending",icon:de,gradient:"bg-gradient-to-r from-brown-500 to-brown-600",iconBg:"bg-gradient-to-br from-brown-500 to-brown-600"}),e.jsx(m,{value:s||0,label:"Total Orders",icon:oe,gradient:"bg-gradient-to-r from-brown-600 to-brown-700",iconBg:"bg-gradient-to-br from-brown-600 to-brown-700"})]})]})})})},ke=({mode:r,loading:n,orderStatusData:d})=>{const s={labels:["Total","Total Orders","Pending Preorder (25%)","Private Preorder (17%)","Delivered"],datasets:[{data:[d?.total||20,d?.totalOrders||15,d?.pendingPreorder||10,d?.privatePreorder||8,d?.delivered||30],backgroundColor:["#9a5533","#b8683f","#d49b7b","#c87e58","#875a42"],borderWidth:0,cutout:"70%"}]},m={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}}},i=[{color:"#9a5533",label:"Total"},{color:"#b8683f",label:"Total Orders"},{color:"#d49b7b",label:"Pending Preorder (25%)"},{color:"#c87e58",label:"Private Preorder (17%)"},{color:"#875a42",label:"Delivered"}];return e.jsx(e.Fragment,{children:n?e.jsx(p,{count:4,height:60,className:"dark:bg-gray-800 bg-gray-200",baseColor:`${r==="dark"?"#010101":"#f9f9f9"}`,highlightColor:`${r==="dark"?"#1a1c23":"#f8f8f8"}`}):e.jsx(l.Card,{className:"h-full",children:e.jsxs(l.CardBody,{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-gray-700 dark:text-gray-200",children:"Order Status"}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-48 h-48 mb-6",children:e.jsx(ge,{data:s,options:m})}),e.jsx("div",{className:"w-full space-y-2",children:i.map((x,b)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:x.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.label})]},b))})]})]})})})},we=({mode:r,loading:n,products:d})=>{const s=[{name:"Slimming Tea",color:"bg-blue-500",count:"3k"},{name:"Protein Powder Energy Bars",color:"bg-brown-600",count:"2.5k"}],m=d&&d.length>0?d:s;return e.jsx(e.Fragment,{children:n?e.jsx(p,{count:3,height:60,className:"dark:bg-gray-800 bg-gray-200",baseColor:`${r==="dark"?"#010101":"#f9f9f9"}`,highlightColor:`${r==="dark"?"#1a1c23":"#f8f8f8"}`}):e.jsx(l.Card,{className:"h-full",children:e.jsxs(l.CardBody,{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-6",children:[e.jsx("h3",{className:"mb-6 text-lg font-semibold text-gray-700 dark:text-gray-200",children:"Best Selling Products"}),e.jsx("div",{className:"space-y-4",children:m.map((i,x)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${i.color||(x===0?"bg-brown-700":"bg-brown-600")}`}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:i.name||i._id})]}),e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:i.count||i.count||"0"})]},x))})]})})})},rt=()=>{const{t:r}=D(),{mode:n}=g.useContext(l.WindmillContext);j.extend(le),j.extend(ne),j.extend(fe);const{currentPage:d,handleChangePage:s}=g.useContext(ae),[m,i]=g.useState(0),[x,b]=g.useState(0),[a,c]=g.useState([]),[v,T]=g.useState(0),[C,y]=g.useState(0),[Y,L]=g.useState(0),[Oe,R]=g.useState(0),[Te,W]=g.useState(0),[Pe,E]=g.useState(0),{data:I,loading:z,error:M}=w(O.getBestSellerProductChart),{data:A,loading:V}=w(()=>O.getDashboardRecentOrder({page:d,limit:8})),{data:u,loading:$}=w(O.getDashboardCount),{data:f,loading:B}=w(O.getDashboardAmount),{dataTable:H,serviceData:q}=ie(A?.orders);return g.useEffect(()=>{const K=f?.ordersData?.filter(t=>j(t.updatedAt).isToday())?.reduce((t,h)=>t+h.total,0);i(K);const U=f?.ordersData?.filter(t=>j(t.updatedAt).set(-1,"day").isYesterday())?.reduce((t,h)=>t+h.total,0);b(U),f?.ordersData?.filter(t=>j(t.updatedAt).isBetween(new Date().setDate(new Date().getDate()-7),new Date))?.reduce((t,h)=>{let o=h.updatedAt.split("T")[0];return t[o]||(t[o]={date:o,total:0,order:0},a.push(t[o])),t[o].total+=h.total,t[o].order+=1,t},{}),c(a);const N=[],k=[];f?.ordersData?.filter((t,h)=>{if(j(t.updatedAt).isToday()){if(t.paymentMethod==="Cash"){let o={paymentMethod:"Cash",total:t.total};N.push(o)}if(t.paymentMethod==="Credit"){const o={paymentMethod:"Credit",total:t.total};N.push(o)}if(t.paymentMethod==="Card"){const o={paymentMethod:"Card",total:t.total};N.push(o)}}return t}),f?.ordersData?.filter((t,h)=>{if(j(t.updatedAt).set(-1,"day").isYesterday()){if(t.paymentMethod==="Cash"){let o={paymentMethod:"Cash",total:t.total};k.push(o)}if(t.paymentMethod==="Credit"){const o={paymentMethod:"Credit",total:t?.total};k.push(o)}if(t.paymentMethod==="Card"){const o={paymentMethod:"Card",total:t?.total};k.push(o)}}return t});const P=Object.values(N.reduce((t,{paymentMethod:h,total:o})=>(t[h]||(t[h]={paymentMethod:h,total:0}),t[h].total+=o,t),{})),G=P.find(t=>t.paymentMethod==="Cash");T(G?.total);const J=P.find(t=>t.paymentMethod==="Card");y(J?.total);const Q=P.find(t=>t.paymentMethod==="Credit");L(Q?.total);const S=Object.values(k.reduce((t,{paymentMethod:h,total:o})=>(t[h]||(t[h]={paymentMethod:h,total:0}),t[h].total+=o,t),{})),X=S.find(t=>t.paymentMethod==="Cash");R(X?.total);const Z=S.find(t=>t.paymentMethod==="Card");W(Z?.total);const ee=S.find(t=>t.paymentMethod==="Credit");E(ee?.total)},[f]),e.jsxs(e.Fragment,{children:[e.jsx(F,{children:r("DashboardOverview")}),e.jsxs(ue,{children:[e.jsxs("div",{className:"grid gap-6 mb-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(Ce,{mode:n,loading:B,todayCash:v||0,todayCard:C||0,todayCredit:Y||0,todayOnline:0,totalAmount:f?.totalAmount||0,totalOrders:u?.totalOrder||0})}),e.jsx("div",{children:e.jsx(Ne,{mode:n,loading:$,ordersPending:u?.totalPendingOrder?.count||0,totalOrders:u?.totalOrder||0})})]}),e.jsxs("div",{className:"grid gap-6 mb-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(ve,{mode:n,loading:B,title:r("WeeklySales"),children:e.jsx(pe,{salesReport:a})})}),e.jsx("div",{children:e.jsx(ke,{mode:n,loading:$,orderStatusData:{total:u?.totalOrder||0,totalOrders:u?.totalOrder||0,pendingPreorder:u?.totalPendingOrder?.count||0,privatePreorder:u?.totalProcessingOrder||0,delivered:u?.totalDeliveredOrder||0}})}),e.jsx("div",{children:e.jsx(we,{mode:n,loading:z,products:I?.bestSellingProduct||[]})})]})]}),e.jsx(F,{children:r("RecentOrder")}),V?e.jsx(me,{row:5,col:4}):M?e.jsx("span",{className:"text-center mx-auto text-red-500",children:M}):q?.length!==0?e.jsxs(l.TableContainer,{className:"mb-8",children:[e.jsxs(l.Table,{children:[e.jsx(l.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(l.TableCell,{children:r("InvoiceNo")}),e.jsx(l.TableCell,{children:r("TimeTbl")}),e.jsxs(l.TableCell,{children:[r("CustomerName")," "]}),e.jsxs(l.TableCell,{children:[" ",r("MethodTbl")," "]}),e.jsxs(l.TableCell,{children:[" ",r("AmountTbl")," "]}),e.jsx(l.TableCell,{children:r("OderStatusTbl")}),e.jsx(l.TableCell,{children:r("ActionTbl")}),e.jsx(l.TableCell,{className:"text-right",children:r("InvoiceTbl")})]})}),e.jsx(be,{orders:H})]}),e.jsx(l.TableFooter,{children:e.jsx(l.Pagination,{totalResults:A?.totalOrder,resultsPerPage:8,onChange:s,label:"Table navigation"})})]}):e.jsx(ye,{title:"Sorry, There are no orders right now."})]})};export{rt as default};
