import{h as y,s as P,q as N,r as n,o as v,j as e,f as l,i as k}from"./index-BRBX7hDb.js";import{u as S,E as u}from"./index.esm-DIUuZJ-3.js";import{L as f}from"./LabelArea-B1eROtO8.js";import{A as E}from"./AdminServices-DS-LzysT.js";import{n as C,a as L}from"./toast-BmuvtaoB.js";import{I as R,a as A}from"./forgot-password-office-dark-CQOqfqw9.js";const H=()=>{const{t:s}=y(),{token:w}=P();N();const[r,d]=n.useState(!1),[I,h]=n.useState(0),{register:i,handleSubmit:p,watch:x,formState:{errors:c,isValid:g}}=S({mode:"onChange"}),o=n.useRef("");o.current=x("newPassword","");const m=n.useCallback(a=>{let t=0;return a.length>=10&&(t+=1),/[A-Z]/.test(a)&&(t+=1),/[a-z]/.test(a)&&(t+=1),/[0-9]/.test(a)&&(t+=1),/[^A-Za-z0-9]/.test(a)&&(t+=1),t},[]);v.useEffect(()=>{o.current&&h(m(o.current))},[o.current,m]);const b=async({newPassword:a})=>{if(!r){d(!0);try{const t=await E.resetPassword({newPassword:a,token:w});C(t.message),setTimeout(()=>history.push("/login"),2e3)}catch(t){L(t?.response?.data?.message||t.message||"Reset failed")}finally{d(!1)}}},j={required:s("You must specify a password")||"You must specify a password",minLength:{value:10,message:s("Password must have at least 10 characters")||"Password must have at least 10 characters"},validate:{hasUpperCase:a=>/[A-Z]/.test(a)||s("Password must contain at least one uppercase letter")||"Password must contain at least one uppercase letter",hasLowerCase:a=>/[a-z]/.test(a)||s("Password must contain at least one lowercase letter")||"Password must contain at least one lowercase letter",hasNumber:a=>/[0-9]/.test(a)||s("Password must contain at least one number")||"Password must contain at least one number"}};return e.jsx("div",{className:"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900",children:e.jsx("div",{className:"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800",children:e.jsxs("div",{className:"flex flex-col overflow-y-auto md:flex-row",children:[e.jsxs("div",{className:"h-32 md:h-auto md:w-1/2",children:[e.jsx("img",{"aria-hidden":"true",className:"object-cover w-full h-full dark:hidden",src:R,alt:"Office"}),e.jsx("img",{"aria-hidden":"true",className:"hidden object-cover w-full h-full dark:block",src:A,alt:"Office"})]}),e.jsx("main",{className:"flex items-center justify-center p-6 sm:p-12 md:w-1/2",children:e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{className:"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200",children:s("ResetPassword")}),e.jsx("p",{className:"mb-6 text-sm text-gray-600 dark:text-gray-400",children:s("Enter your new password below")}),e.jsxs("form",{onSubmit:p(b),children:[e.jsx(f,{label:s("New Password")}),e.jsx(l.Input,{name:"newPassword",type:"password",autoComplete:"new-password",placeholder:s("Enter new password"),...i("newPassword",j),className:"mt-1",disabled:r}),e.jsx(u,{errorName:c.newPassword}),e.jsxs("div",{className:"mt-6",children:[e.jsx(f,{label:s("Confirm Password")}),e.jsx(l.Input,{name:"confirm_password",type:"password",autoComplete:"new-password",placeholder:s("Confirm your password"),...i("confirm_password",{required:s("Please confirm your password")||"Please confirm your password",validate:a=>a===o.current||s("The passwords do not match")||"The passwords do not match"}),className:"mt-1",disabled:r}),e.jsx(u,{errorName:c.confirm_password})]}),e.jsx(l.Button,{disabled:r||!g,type:"submit",block:!0,className:"mt-6 h-12",children:s(r?"Resetting...":"Reset Password")})]}),e.jsx("p",{className:"mt-4 text-center",children:e.jsx(k,{className:"text-sm font-medium text-emerald-500 dark:text-emerald-400 hover:underline focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 rounded",to:"/login",children:s("Back to Login")})})]})})]})})})};export{H as default};
