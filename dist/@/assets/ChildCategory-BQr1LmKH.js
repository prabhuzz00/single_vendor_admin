import{s as L,r as o,S as M,h as R,j as e,i as T,f as s}from"./index-BRBX7hDb.js";import{u as O,f as U,e as H,b as V,c as $}from"./Layout-KhibMNC7.js";import{a as q}from"./CategoryTable-Da9cer39.js";import{B as z}from"./BulkActionDrawer-DmBfuJod.js";import{C as G}from"./CheckBox-nJsbTM8m.js";import{D as J}from"./DeleteModal-CqhPW0Ap.js";import{L as K}from"./Loading-Dw8YPOdr.js";import{N as Q}from"./NotFound-D4QUBmsM.js";import{P as W}from"./PageTitle-C0I8t3w2.js";import{u as X}from"./useAsync-BesWtCte.js";import{u as Y}from"./useFilter-CmFPAZ1j.js";import{u as Z}from"./DrawerButton-BjwC-AQC.js";import{C as ee}from"./ProductServices-B8dTtDEx.js";import{A as se}from"./AnimatedContent-BDApi7bC.js";import"./iconBase-MO_yqM0e.js";import"./logo-color-D4dEd9DP.js";import"./ParentCategory-b8eB83_s.js";import"./toast-BmuvtaoB.js";import"./index.esm-DIUuZJ-3.js";import"./InputArea-D5SbBmG7.js";import"./LabelArea-B1eROtO8.js";import"./SwitchToggle-CNRwyEeq.js";import"./index.prod-DzGpE9S3.js";import"./Uploader-DqKrMY9q.js";import"./tslib.es6-BfZZHrVl.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./index-CBBKfmC5.js";import"./useTranslationValue-BkQTMktR.js";import"./EditDeleteButton-BLUUhkxP.js";import"./Tooltip-Be4V-BoV.js";import"./CouponServices-j8c0PyJg.js";import"./CurrencyServices-DdWWi0T6.js";import"./useDisableForDemo-8L6F_Yoc.js";import"./spinner-CkndCogW.js";import"./AdminServices-DS-LzysT.js";import"./browser-CmZe1AEk.js";const Re=()=>{const{id:n}=L(),[u,N]=o.useState([]),[y,w]=o.useState([]),[j,k]=o.useState(!1),[c,m]=o.useState([]),{toggleDrawer:A,lang:f}=o.useContext(M),{handleDeleteMany:v,allId:g,handleUpdateMany:P}=Z(),{data:d,loading:h,error:C}=X(ee.getAllCategory),{showingTranslateValue:S}=O(),{t}=R();o.useEffect(()=>{const l=(r,a,p=[])=>{for(let i of a){if(i._id===r)return p.concat(i);const b=l(r,i?.children,p?.concat(i));if(b)return b}},x=(r,a)=>r._id===a?r:r?.children?.reduce((p,i)=>p??x(i,a),void 0);if(!h){const r=x(d[0],n),a=l(n,d[0]?.children);r?.children?.length>0&&(N(r?.children),w(a))}},[n,h,d,u]);const{totalResults:D,resultsPerPage:F,dataTable:B,serviceData:I,handleChangePage:E}=Y(u),_=()=>{k(!j),m(u?.map(l=>l._id)),j&&m([])};return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:t("CategoryPageTitle")}),e.jsx(J,{ids:g,setIsCheck:m,category:!0}),e.jsx(z,{ids:g,title:"Child Categories",lang:f,data:d,childId:n}),e.jsxs(se,{children:[e.jsx("div",{className:"flex items-center pb-4",children:e.jsxs("ol",{className:"flex items-center w-full overflow-hidden font-serif",children:[e.jsx("li",{className:"text-sm pr-1 transition duration-200 ease-in cursor-pointer hover:text-emerald-500 font-semibold",children:e.jsx(T,{to:"/categories",children:t("Categories")})}),y?.map((l,x)=>e.jsxs("span",{className:"flex items-center font-serif",children:[e.jsxs("li",{className:"text-sm mt-[1px]",children:[" ",e.jsx(U,{})," "]}),e.jsx("li",{className:"text-sm pl-1 transition duration-200 ease-in cursor-pointer text-blue-700 hover:text-emerald-500 font-semibold ",children:e.jsx(T,{to:`/categories/${l._id}`,children:S(l?.name)})})]},x+1))]})}),e.jsx(s.Card,{className:"min-w-0 shadow-xs overflow-hidden bg-white dark:bg-gray-800 mb-5",children:e.jsx(s.CardBody,{children:e.jsxs("div",{className:"flex justify-end items-end",children:[e.jsxs(s.Button,{onClick:A,className:"rounded-md h-12",children:[e.jsx("span",{className:"mr-3",children:e.jsx(H,{})}),t("AddCategory")]}),e.jsx("div",{className:"ml-3 w-full md:w-24 lg:w-24 xl:w-24",children:e.jsxs(s.Button,{disabled:c.length<1,onClick:()=>P(c),className:"w-full rounded-md h-12",children:[e.jsx(V,{}),t("BulkAction")]})}),e.jsxs(s.Button,{disabled:c.length<1,onClick:()=>v(c),className:"ml-3 rounded-md h-12 bg-red-500",children:[e.jsx("span",{className:"mr-3",children:e.jsx($,{})}),t("Delete")]})]})})})]}),h?e.jsx(K,{loading:h}):C?e.jsx("span",{className:"text-center mx-auto text-red-500",children:C}):I?.length!==0?e.jsxs(s.TableContainer,{className:"mb-8",children:[e.jsxs(s.Table,{children:[e.jsx(s.TableHeader,{children:e.jsxs("tr",{children:[e.jsx(s.TableCell,{children:e.jsx(G,{type:"checkbox",name:"selectAll",id:"selectAll",handleClick:_,isChecked:j})}),e.jsx(s.TableCell,{children:t("catIdTbl")}),e.jsx(s.TableCell,{children:t("catIconTbl")}),e.jsx(s.TableCell,{children:t("Name")}),e.jsx(s.TableCell,{children:t("Description")}),e.jsx(s.TableCell,{className:"text-center",children:t("catPublishedTbl")}),e.jsx(s.TableCell,{className:"text-right",children:t("catActionsTbl")})]})}),e.jsx(q,{categories:B,data:d,lang:f,isCheck:c,setIsCheck:m,useParamId:n})]}),e.jsx(s.TableFooter,{children:e.jsx(s.Pagination,{totalResults:D,resultsPerPage:F,onChange:E,label:"Table navigation"})})]}):e.jsx(Q,{title:"Sorry, There are no categories right now."})]})};export{Re as default};
